import org.apache.tools.ant.filters.ReplaceTokens

group 'me.realized'
version '3.0.0-SNAPSHOT'

apply plugin: 'java'

compileJava.options.encoding = 'UTF-8'

sourceCompatibility = 1.8
targetCompatibility = 1.8

jar {
    manifest.attributes provider: 'gradle'
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

processResources {
    from(sourceSets.main.resources.srcDirs) {
        include '**/*.yml'
        filter(ReplaceTokens, tokens: [VERSION: project.version])
    }
}

configurations {
    provided
    compile.extendsFrom provided
}

jar {
    from {
        (configurations.runtime - configurations.provided).collect {
            it.isDirectory() ? it : zipTree(it)
        }
    } {
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
    }
}

repositories {
    mavenLocal()
    mavenCentral()

    maven {
        name 'spigot-repo'
        url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots'
    }

    maven {
        name 'vault-repo'
        url 'http://nexus.hc.to/content/repositories/pub_releases'
    }

    maven {
        name 'mvdw-repo'
        url 'http://repo.mvdw-software.be/content/groups/public/'
    }

    maven {
        name 'clip-repo'
        url 'http://repo.extendedclip.com/content/repositories/placeholderapi/'
    }

    maven {
        name 'sk89q-repo'
        url 'http://maven.sk89q.com/repo/'
    }

    maven {
        name 'byteflux-repo'
        url 'http://repo.byteflux.net/repository/maven-releases'
    }
}

dependencies {
    provided 'org.spigotmc:spigot-api:1.12.2-R0.1-SNAPSHOT'
    provided 'org.spigotmc:spigot:1.12.2-R0.1-SNAPSHOT'
    provided 'net.milkbowl.vault:VaultAPI:1.6'
    provided 'me.clip:placeholderapi:2.8.4'
    provided 'com.sk89q:worldguard:6.1.1-SNAPSHOT'
    provided 'net.ess3:EssentialsX:2.0.1'
    provided 'net.minelink:CombatTagPlus:1.3.1'
    provided(group: 'com.massivecraft', name: 'Factions', version:'1.6.9.5-U0.1.14') {
        exclude(module: 'fanciful')
    }
    provided 'org.projectlombok:lombok:1.16.20'

    compile group: 'com.google.code.gson', name: 'gson', version:'2.8.2'
    compile 'be.maximvdw:MVdWPlaceholderAPI:2.5.1-SNAPSHOT'
}
